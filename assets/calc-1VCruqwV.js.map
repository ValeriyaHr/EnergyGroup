{"version":3,"file":"calc-1VCruqwV.js","sources":["../../js/calc.js"],"sourcesContent":["//Калькулятор\r\n\r\nfunction toNum(v){\r\n    // підтримка коми 4,5\r\n    const n = Number(String(v).trim().replace(\",\", \".\"));\r\n    return Number.isFinite(n) ? n : null;\r\n}\r\n\r\nfunction openModal(id){\r\n    $(\"#\" + id).addClass(\"is-open\");\r\n    $(\"body\").addClass(\"no-scroll\");\r\n}\r\n\r\nfunction closeModal(id){\r\n    $(\"#\" + id).removeClass(\"is-open\");\r\n    $(\"body\").removeClass(\"no-scroll\");\r\n}\r\n// Обробка відправки форми\r\nfunction ShowCalcResult(){\r\n\r\n\r\n    const inom = toNum($('#inom').val());\r\n    const rho = toNum($('#rho').val());\r\n\r\n    console.log('inom=' + inom);\r\n    console.log('rho=' + rho);\r\n\r\n    if (inom === null || rho === null || inom <= 0 || rho <= 0) {\r\n        alert(\"Перевір числа: мають бути > 0 (можна 4,0 або 4.0).\");\r\n        return;\r\n    }\r\n\r\n    // Константи з твоєї таблиці\r\n    const K_max_I = 1.5;\r\n    const U_skz_max = 50;\r\n    const K_zapas_U = 1.5;\r\n    const K_zapas_R = 1.3;\r\n    const K_season = 1.3;\r\n    const K_ekr = 0.75;\r\n    const V_anod = 0.02;\r\n    const T_years = 20;\r\n    const K_nerivn = 2;\r\n    const M_core = 6;\r\n\r\n    // Розрахунки\r\n    const I_max = inom * K_max_I;\r\n    const U_start = U_skz_max / K_zapas_U;\r\n    const R_calc = U_start / inom;\r\n    const R_start = R_calc / K_zapas_R;\r\n    const Ri_base = 5 * 0.1 * rho;\r\n    const Ri = Ri_base * K_season;\r\n    const N_electr = Ri / R_start;\r\n    const N_fact = N_electr / K_ekr;\r\n    const M_az = V_anod * T_years * inom * K_nerivn;\r\n    const N_by_mass = M_az / M_core;\r\n    const N_final = Math.ceil(Math.max(N_fact, N_by_mass));\r\n\r\n    $(\"#calc-result-value\").text(String(N_final));\r\n    closeModal(\"calc-modal\");\r\n    openModal(\"calc-modal-result\");\r\n}\r\n\r\n(function initAzCalculator(){\r\n    const $modal = $(\"#calc-modal\");\r\n    const $resultModal = $(\"#calc-modal-result\");\r\n    if ($modal.length === 0 || $resultModal.length === 0) return;\r\n\r\n    // Закриття модалей при кліку на overlay або кнопку close\r\n    $(document).on(\"click\", \".calc-modal__close\", function(e) {\r\n        e.stopPropagation();\r\n        const $modal = $(this).closest(\"#calc-modal, #calc-modal-result\");\r\n        if ($modal.length) {\r\n            const modalId = $modal.attr(\"id\");\r\n            if (modalId) {\r\n                closeModal(modalId);\r\n            }\r\n        }\r\n    });\r\n\r\n    // Альтернативна логіка: закриття при кліку на overlay\r\n    $(document).on(\"click\", \".calc-modal__overlay\", function(e) {\r\n        e.stopPropagation();\r\n        const $modal = $(this).closest(\".calc-modal\");\r\n        if ($modal.length) {\r\n            closeModal($modal.attr(\"id\"));\r\n        }\r\n    });\r\n\r\n    // Виклик з кнопки на картці товару:\r\n    // <button data-calc-open>Калькулятор</button>\r\n    $(document).on(\"click\", \"[data-calc-open]\", function() {\r\n        openModal(\"calc-modal\");\r\n    });\r\n\r\n    const $form = $(\"#calc-form\");\r\n\r\n\r\n\r\n})();"],"names":["$modal"],"mappings":"AAQA,SAAS,UAAU,IAAG;AAClB,IAAE,MAAM,EAAE,EAAE,SAAS,SAAS;AAC9B,IAAE,MAAM,EAAE,SAAS,WAAW;AAClC;AAEA,SAAS,WAAW,IAAG;AACnB,IAAE,MAAM,EAAE,EAAE,YAAY,SAAS;AACjC,IAAE,MAAM,EAAE,YAAY,WAAW;AACrC;AAAA,CA8CC,SAAS,mBAAkB;AACxB,QAAM,SAAS,EAAE,aAAa;AAC9B,QAAM,eAAe,EAAE,oBAAoB;AAC3C,MAAI,OAAO,WAAW,KAAK,aAAa,WAAW,EAAG;AAGtD,IAAE,QAAQ,EAAE,GAAG,SAAS,sBAAsB,SAAS,GAAG;AACtD,MAAE,gBAAe;AACjB,UAAMA,UAAS,EAAE,IAAI,EAAE,QAAQ,iCAAiC;AAChE,QAAIA,QAAO,QAAQ;AACf,YAAM,UAAUA,QAAO,KAAK,IAAI;AAChC,UAAI,SAAS;AACT,mBAAW,OAAO;AAAA,MACtB;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,IAAE,QAAQ,EAAE,GAAG,SAAS,wBAAwB,SAAS,GAAG;AACxD,MAAE,gBAAe;AACjB,UAAMA,UAAS,EAAE,IAAI,EAAE,QAAQ,aAAa;AAC5C,QAAIA,QAAO,QAAQ;AACf,iBAAWA,QAAO,KAAK,IAAI,CAAC;AAAA,IAChC;AAAA,EACJ,CAAC;AAID,IAAE,QAAQ,EAAE,GAAG,SAAS,oBAAoB,WAAW;AACnD,cAAU,YAAY;AAAA,EAC1B,CAAC;AAEa,IAAE,YAAY;AAIhC,GAAC;"}