{"version":3,"file":"productsJs-7In4NRz1.js","sources":["../../js/products.js"],"sourcesContent":["$(function () {\r\n    const $wrap = $(\"#productDetails\");\r\n\r\n    let lastUrl = null;\r\n    let isLoaded = false;\r\n    let isOpen = false;\r\n    let wheelArmed = true; // щоб не спрацьовувало 20 разів\r\n\r\n    function openDetails() {\r\n        if (!isLoaded) return;\r\n\r\n        $wrap.addClass(\"is-ready\");\r\n        // даємо браузеру вставити DOM, тоді додаємо клас для анімації\r\n        requestAnimationFrame(() => {\r\n            $wrap.addClass(\"is-open\");\r\n            isOpen = true;\r\n\r\n            $(\"html, body\").stop().animate({\r\n                scrollTop: $wrap.offset().top - 60\r\n            }, 350);\r\n        });\r\n    }\r\n\r\n    function closeDetails() {\r\n        $wrap.removeClass(\"is-open\");\r\n        isOpen = false;\r\n\r\n        // Очищаем содержимое после завершения анимации\r\n        setTimeout(() => {\r\n            $wrap.removeClass(\"is-ready\").empty();\r\n            isLoaded = false;\r\n            lastUrl = null;\r\n        }, 350);\r\n    }\r\n\r\n    function loadProduct(url) {\r\n        // якщо вже завантажували той самий — просто відкриваємо\r\n        if (isLoaded && url === lastUrl) {\r\n            openDetails();\r\n            return;\r\n        }\r\n\r\n        isLoaded = false;\r\n        isOpen = false;\r\n        lastUrl = url;\r\n\r\n        $wrap.removeClass(\"is-open is-ready\").hide().empty();\r\n\r\n        $wrap.load(url, function (response, status) {\r\n            if (status === \"error\") {\r\n                $wrap.show().addClass(\"is-ready\").html(\"<p>Помилка завантаження</p>\");\r\n                return;\r\n            }\r\n\r\n            isLoaded = true;\r\n            $wrap.show(); // показуємо контейнер\r\n            openDetails();\r\n        });\r\n    }\r\n\r\n    $(document).on(\"click\", \".productDetails__back\", function (e) {\r\n        e.preventDefault();\r\n        closeDetails();\r\n    });\r\n    // ✅ КЛІК по кнопці\r\n    $(document).on(\"click\", \".js-open-product\", function (e) {\r\n        e.preventDefault();\r\n\r\n        const productId = $(this).data(\"product\"); // p01\r\n        const url = `./product-details/${productId}.html`;\r\n        loadProduct(url);\r\n\r\n        // після кліку дозволяємо відкриття колесом ще раз\r\n        wheelArmed = true;\r\n    });\r\n\r\n    // ✅ ВІДКРИТТЯ колесиком вниз (тільки якщо вже щось підвантажено)\r\n    $(window).on(\"wheel\", function (e) {\r\n        const deltaY = e.originalEvent.deltaY;\r\n\r\n        // тільки \"вниз\"\r\n        if (deltaY <= 0) return;\r\n\r\n        // якщо вже відкрито або нічого не завантажено — нічого не робимо\r\n        if (!isLoaded || isOpen) return;\r\n\r\n        // антиспам\r\n        if (!wheelArmed) return;\r\n        wheelArmed = false;\r\n\r\n        openDetails();\r\n\r\n        // через секунду знову можна (на випадок якщо закриєш/перезавантажиш)\r\n        setTimeout(() => (wheelArmed = true), 800);\r\n    });\r\n\r\n    // (опціонально) закриття по Esc\r\n    $(document).on(\"keydown\", function (e) {\r\n        if (e.key === \"Escape\") closeDetails();\r\n    });\r\n});"],"names":[],"mappings":"AAAA,EAAE,WAAY;AACV,QAAM,QAAQ,EAAE,iBAAiB;AAEjC,MAAI,UAAU;AACd,MAAI,WAAW;AACf,MAAI,SAAS;AACb,MAAI,aAAa;AAEjB,WAAS,cAAc;AACnB,QAAI,CAAC,SAAU;AAEf,UAAM,SAAS,UAAU;AAEzB,0BAAsB,MAAM;AACxB,YAAM,SAAS,SAAS;AACxB,eAAS;AAET,QAAE,YAAY,EAAE,KAAI,EAAG,QAAQ;AAAA,QAC3B,WAAW,MAAM,OAAM,EAAG,MAAM;AAAA,MAChD,GAAe,GAAG;AAAA,IACV,CAAC;AAAA,EACL;AAEA,WAAS,eAAe;AACpB,UAAM,YAAY,SAAS;AAC3B,aAAS;AAGT,eAAW,MAAM;AACb,YAAM,YAAY,UAAU,EAAE,MAAK;AACnC,iBAAW;AACX,gBAAU;AAAA,IACd,GAAG,GAAG;AAAA,EACV;AAEA,WAAS,YAAY,KAAK;AAEtB,QAAI,YAAY,QAAQ,SAAS;AAC7B;AACA;AAAA,IACJ;AAEA,eAAW;AACX,aAAS;AACT,cAAU;AAEV,UAAM,YAAY,kBAAkB,EAAE,KAAI,EAAG,MAAK;AAElD,UAAM,KAAK,KAAK,SAAU,UAAU,QAAQ;AACxC,UAAI,WAAW,SAAS;AACpB,cAAM,KAAI,EAAG,SAAS,UAAU,EAAE,KAAK,6BAA6B;AACpE;AAAA,MACJ;AAEA,iBAAW;AACX,YAAM,KAAI;AACV;IACJ,CAAC;AAAA,EACL;AAEA,IAAE,QAAQ,EAAE,GAAG,SAAS,yBAAyB,SAAU,GAAG;AAC1D,MAAE,eAAc;AAChB;EACJ,CAAC;AAED,IAAE,QAAQ,EAAE,GAAG,SAAS,oBAAoB,SAAU,GAAG;AACrD,MAAE,eAAc;AAEhB,UAAM,YAAY,EAAE,IAAI,EAAE,KAAK,SAAS;AACxC,UAAM,MAAM,qBAAqB,SAAS;AAC1C,gBAAY,GAAG;AAGf,iBAAa;AAAA,EACjB,CAAC;AAGD,IAAE,MAAM,EAAE,GAAG,SAAS,SAAU,GAAG;AAC/B,UAAM,SAAS,EAAE,cAAc;AAG/B,QAAI,UAAU,EAAG;AAGjB,QAAI,CAAC,YAAY,OAAQ;AAGzB,QAAI,CAAC,WAAY;AACjB,iBAAa;AAEb;AAGA,eAAW,MAAO,aAAa,MAAO,GAAG;AAAA,EAC7C,CAAC;AAGD,IAAE,QAAQ,EAAE,GAAG,WAAW,SAAU,GAAG;AACnC,QAAI,EAAE,QAAQ,SAAU,cAAY;AAAA,EACxC,CAAC;AACL,CAAC;"}