{"version":3,"file":"calc-DfibgWFJ.js","sources":["../../js/calc.js"],"sourcesContent":["//Калькулятор\r\n\r\nfunction toNum(v){\r\n    // підтримка коми 4,5\r\n    const n = Number(String(v).trim().replace(\",\", \".\"));\r\n    return Number.isFinite(n) ? n : null;\r\n}\r\n\r\nfunction openModal(id){\r\n    $(\"#\" + id).addClass(\"is-open\");\r\n    $(\"body\").addClass(\"no-scroll\");\r\n}\r\n\r\nfunction closeModal(id){\r\n    $(\"#\" + id).removeClass(\"is-open\");\r\n    $(\"body\").removeClass(\"no-scroll\");\r\n}\r\n\r\n(function initAzCalculator(){\r\n    const $modal = $(\"#calc-modal\");\r\n    const $resultModal = $(\"#calc-modal-result\");\r\n    if ($modal.length === 0 || $resultModal.length === 0) return;\r\n\r\n    // Закриття модалей при кліку на overlay або кнопку close\r\n    $(document).on(\"click\", \"[data-close-calc]\", function() {\r\n        const $parent = $(this).closest(\".calc-modal\");\r\n        if ($parent.length) {\r\n            closeModal($parent.attr(\"id\"));\r\n        }\r\n    });\r\n\r\n    // Виклик з кнопки на картці товару:\r\n    // <button data-calc-open>Калькулятор</button>\r\n    $(document).on(\"click\", \"[data-calc-open]\", function() {\r\n        openModal(\"calc-modal\");\r\n    });\r\n\r\n    const $form = $(\"#calc-form\");\r\n    const $resultValue = $(\"#calc-result-value\");\r\n\r\n    $form.on(\"submit\", function(e) {\r\n        e.preventDefault();\r\n\r\n        const inom = toNum($form.find(\"input[name='inom']\").val());\r\n        const rho = toNum($form.find(\"input[name='rho']\").val());\r\n\r\n        if (inom === null || rho === null || inom <= 0 || rho <= 0) {\r\n            alert(\"Перевір числа: мають бути > 0 (можна 4,0 або 4.0).\");\r\n            return;\r\n        }\r\n\r\n        // Константи з твоєї таблиці\r\n        const K_max_I = 1.5;\r\n        const U_skz_max = 50;\r\n        const K_zapas_U = 1.5;\r\n        const K_zapas_R = 1.3;\r\n        const K_season = 1.3;\r\n        const K_ekr = 0.75;\r\n        const V_anod = 0.02;   // кг/(A*рік)\r\n        const T_years = 20;\r\n        const K_nerivn = 2;\r\n        const M_core = 6;      // кг\r\n\r\n        // Розрахунки\r\n        const I_max = inom * K_max_I;\r\n        const U_start = U_skz_max / K_zapas_U;\r\n        const R_calc = U_start / inom;\r\n        const R_start = R_calc / K_zapas_R;\r\n\r\n        const Ri_base = 5 * 0.1 * rho;\r\n        const Ri = Ri_base * K_season;\r\n\r\n        const N_electr = Ri / R_start;\r\n        const N_fact = N_electr / K_ekr;\r\n\r\n        const M_az = V_anod * T_years * inom * K_nerivn;\r\n        const N_by_mass = M_az / M_core;\r\n\r\n        const N_final = Math.ceil(Math.max(N_fact, N_by_mass));\r\n\r\n        // Показує результат\r\n        $resultValue.text(String(N_final));\r\n\r\n        // Закриває форму і відкриває результат\r\n        closeModal(\"calc-modal\");\r\n        openModal(\"calc-modal-result\");\r\n    });\r\n})();"],"names":[],"mappings":"AAEA,SAAS,MAAM,GAAE;AAEb,QAAM,IAAI,OAAO,OAAO,CAAC,EAAE,KAAI,EAAG,QAAQ,KAAK,GAAG,CAAC;AACnD,SAAO,OAAO,SAAS,CAAC,IAAI,IAAI;AACpC;AAEA,SAAS,UAAU,IAAG;AAClB,IAAE,MAAM,EAAE,EAAE,SAAS,SAAS;AAC9B,IAAE,MAAM,EAAE,SAAS,WAAW;AAClC;AAEA,SAAS,WAAW,IAAG;AACnB,IAAE,MAAM,EAAE,EAAE,YAAY,SAAS;AACjC,IAAE,MAAM,EAAE,YAAY,WAAW;AACrC;AAAA,CAEC,SAAS,mBAAkB;AACxB,QAAM,SAAS,EAAE,aAAa;AAC9B,QAAM,eAAe,EAAE,oBAAoB;AAC3C,MAAI,OAAO,WAAW,KAAK,aAAa,WAAW,EAAG;AAGtD,IAAE,QAAQ,EAAE,GAAG,SAAS,qBAAqB,WAAW;AACpD,UAAM,UAAU,EAAE,IAAI,EAAE,QAAQ,aAAa;AAC7C,QAAI,QAAQ,QAAQ;AAChB,iBAAW,QAAQ,KAAK,IAAI,CAAC;AAAA,IACjC;AAAA,EACJ,CAAC;AAID,IAAE,QAAQ,EAAE,GAAG,SAAS,oBAAoB,WAAW;AACnD,cAAU,YAAY;AAAA,EAC1B,CAAC;AAED,QAAM,QAAQ,EAAE,YAAY;AAC5B,QAAM,eAAe,EAAE,oBAAoB;AAE3C,QAAM,GAAG,UAAU,SAAS,GAAG;AAC3B,MAAE,eAAc;AAEhB,UAAM,OAAO,MAAM,MAAM,KAAK,oBAAoB,EAAE,IAAG,CAAE;AACzD,UAAM,MAAM,MAAM,MAAM,KAAK,mBAAmB,EAAE,IAAG,CAAE;AAEvD,QAAI,SAAS,QAAQ,QAAQ,QAAQ,QAAQ,KAAK,OAAO,GAAG;AACxD,YAAM,oDAAoD;AAC1D;AAAA,IACJ;AAIA,UAAM,YAAY;AAClB,UAAM,YAAY;AAClB,UAAM,YAAY;AAClB,UAAM,WAAW;AACjB,UAAM,QAAQ;AACd,UAAM,SAAS;AACf,UAAM,UAAU;AAChB,UAAM,WAAW;AACjB,UAAM,SAAS;AAIf,UAAM,UAAU,YAAY;AAC5B,UAAM,SAAS,UAAU;AACzB,UAAM,UAAU,SAAS;AAEzB,UAAM,UAAU,IAAI,MAAM;AAC1B,UAAM,KAAK,UAAU;AAErB,UAAM,WAAW,KAAK;AACtB,UAAM,SAAS,WAAW;AAE1B,UAAM,OAAO,SAAS,UAAU,OAAO;AACvC,UAAM,YAAY,OAAO;AAEzB,UAAM,UAAU,KAAK,KAAK,KAAK,IAAI,QAAQ,SAAS,CAAC;AAGrD,iBAAa,KAAK,OAAO,OAAO,CAAC;AAGjC,eAAW,YAAY;AACvB,cAAU,mBAAmB;AAAA,EACjC,CAAC;AACL,GAAC;"}