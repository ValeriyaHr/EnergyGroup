{"version":3,"file":"mainJs-C70gN9Ql.js","sources":["../../js/main.js"],"sourcesContent":["// import $ from \"jquery\";\r\n// window.$ = $;\r\n// window.jQuery = $;\r\n\r\nconst $ = window.jQuery;\r\n\r\n\r\n//import \"./menu.js\";\r\n\r\n\r\n\r\n\r\n// Вызов setupCounter — только если функция определена (защита от Vite шаблонных артефактов)\r\nconst counterEl = document.querySelector('#counter');\r\nif (counterEl && typeof window.setupCounter === 'function') {\r\n    window.setupCounter(counterEl);\r\n}\r\n\r\n//--- скрипт подключение картинок\r\nasync function includePart(el) {\r\n    const url = el.getAttribute('data-include');\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error(`Include failed: ${url}`);\r\n    el.outerHTML = await res.text();\r\n}\r\n\r\nasync function includeAll() {\r\n    const nodes = document.querySelectorAll('[data-include]');\r\n    await Promise.all([...nodes].map(includePart));\r\n}\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    includeAll()\r\n        .then(() => {\r\n            initWhyUsUnfold();\r\n            if (typeof initSmoothAnchorScroll === \"function\") initSmoothAnchorScroll();\r\n            initExperienceNumbers();\r\n        })\r\n        .catch(console.error);\r\n});\r\n\r\n\r\n// --- arrows as DATA URI (exactly your white-up2.svg & orange-up2.svg) ---\r\nconst WHITE_ARROW =\r\n    \"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20width%3D%2222%22%20height%3D%2222%22%20viewBox%3D%220%200%2022%2022%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M17.98%2C6.06%2C17.98%2C4.02%2C15.94%2C4.02%2C15.94%2C4.04%2C5.02%2C4.04%2C5.02%2C6.06%2C14.48%2C6.06%2C4.02%2C16.52%2C5.48%2C17.98%2C15.94%2C7.52%2C15.94%2C17.98%2C17.98%2C17.98%2C17.98%2C6.06Z%22/%3E%3C/svg%3E\";\r\n\r\nconst ORANGE_ARROW =\r\n    \"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20width%3D%2222%22%20height%3D%2222%22%20viewBox%3D%220%200%2022%2022%22%3E%3Cpath%20fill%3D%22%23f80%22%20d%3D%22M17.98%2C6.06%2C17.98%2C4.02%2C15.94%2C4.02%2C15.94%2C4.04%2C5.02%2C4.04%2C5.02%2C6.06%2C14.48%2C6.06%2C4.02%2C16.52%2C5.48%2C17.98%2C15.94%2C7.52%2C15.94%2C17.98%2C17.98%2C17.98%2C17.98%2C6.06Z%22/%3E%3C/svg%3E\";\r\n\r\n// ставимо білі стрілки одразу (щоб не було src=\"\")\r\ndocument.querySelectorAll(\".engRow__arrowIcon\").forEach((img) => {\r\n    img.src = WHITE_ARROW;\r\n});\r\n\r\n// акордеон — клік по всьому блоку\r\ndocument.addEventListener(\"click\", (e) => {\r\n    const row = e.target.closest(\".js-engRow\");\r\n    if (!row) return;\r\n\r\n    const panel = row.nextElementSibling?.classList.contains(\"js-engPanel\")\r\n        ? row.nextElementSibling\r\n        : null;\r\n\r\n    if (!panel) return;\r\n\r\n    const icon = row.querySelector(\".engRow__arrowIcon\");\r\n\r\n    const isOpen = row.classList.toggle(\"is-open\");\r\n    row.setAttribute(\"aria-expanded\", String(isOpen));\r\n\r\n    if (icon) icon.src = isOpen ? ORANGE_ARROW : WHITE_ARROW;\r\n\r\n    const item = row.closest(\".engItem\");\r\n    if (item) item.classList.toggle(\"is-open\", isOpen);\r\n\r\n    panel.hidden = !isOpen;\r\n    panel.classList.toggle(\"is-open\", isOpen);\r\n});\r\n\r\n\r\n/// ./js/main.js\r\n// Prime Energy Group — main interactions (vanilla JS)\r\n\r\nfunction initWhyUsUnfold() {\r\n    const root = document.querySelector(\"#whyReveal\");\r\n    if (!root) return;\r\n\r\n    const items = root.querySelectorAll(\".whyItem\");\r\n    if (!items.length) return;\r\n\r\n    // щоб CSS міг порахувати висоту панелі\r\n    root.style.setProperty(\"--count\", String(items.length));\r\n\r\n    // reduced motion — одразу розкладено\r\n    if (window.matchMedia?.(\"(prefers-reduced-motion: reduce)\")?.matches) {\r\n        root.style.setProperty(\"--p\", \"1\");\r\n        return;\r\n    }\r\n\r\n    let raf = 0;\r\n    let active = false;\r\n\r\n    const clamp01 = (v) => Math.max(0, Math.min(1, v));\r\n\r\n    const update = () => {\r\n        raf = 0;\r\n        if (!active) return;\r\n\r\n        const r = root.getBoundingClientRect();\r\n        const vh = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n        // довгий “інтервал” розгортання — щоб виглядало як у макеті\r\n        const start = vh * 0.95; // починаємо майже знизу\r\n        const end   = vh * 0.05; // закінчуємо майже зверху\r\n\r\n        const p = clamp01((start - r.top) / (start - end));\r\n        root.style.setProperty(\"--p\", p.toFixed(4));\r\n    };\r\n\r\n    const onScroll = () => {\r\n        if (raf) return;\r\n        raf = requestAnimationFrame(update);\r\n    };\r\n\r\n    const io = new IntersectionObserver(\r\n        (entries) => {\r\n            const isIn = entries.some((e) => e.isIntersecting);\r\n\r\n            if (isIn && !active) {\r\n                active = true;\r\n                update();\r\n                window.addEventListener(\"scroll\", onScroll, { passive: true });\r\n                window.addEventListener(\"resize\", onScroll);\r\n            } else if (!isIn && active) {\r\n                active = false;\r\n                window.removeEventListener(\"scroll\", onScroll);\r\n                window.removeEventListener(\"resize\", onScroll);\r\n            }\r\n        },\r\n        { rootMargin: \"200px 0px 200px 0px\", threshold: 0.01 }\r\n    );\r\n\r\n    io.observe(root);\r\n}\r\n\r\n// головна цифри\r\n\r\nfunction initExperienceStack() {\r\n    const stage = document.querySelector(\".experience\");\r\n    if (!stage) return;\r\n\r\n    const nums = stage.querySelector(\".experience__numbers\");\r\n    if (!nums) return;\r\n\r\n    const items = Array.from(nums.querySelectorAll(\".experience__big\"));\r\n    if (!items.length) return;\r\n\r\n    // reduced motion: одразу фінал\r\n    if (window.matchMedia?.(\"(prefers-reduced-motion: reduce)\")?.matches) {\r\n        items.forEach((el) => el.style.setProperty(\"--t\", \"1\"));\r\n        return;\r\n    }\r\n\r\n    let raf = 0;\r\n    let active = false;\r\n\r\n    const clamp01 = (v) => Math.max(0, Math.min(1, v));\r\n\r\n    const update = () => {\r\n        raf = 0;\r\n        if (!active) return;\r\n\r\n        const r = stage.getBoundingClientRect();\r\n        const vh = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n        // довший інтервал, щоб \"по одному\" виглядало плавно\r\n        const start = vh * 0.92;   // старт трохи раніше\r\n        const end   = -vh * 0.50;  // фініш ближче, щоб швидше складався стек\r\n\r\n        const p01 = clamp01((start - r.top) / (start - end));\r\n\r\n        // 0..N: по черзі для кожного елемента\r\n        const n = items.length;\r\n        const p = p01 * (n - 1);\r\n\r\n        items.forEach((el, i) => {\r\n            const t = clamp01(p - i);\r\n            el.style.setProperty(\"--t\", t.toFixed(4));\r\n        });\r\n    };\r\n\r\n    const onScroll = () => {\r\n        if (raf) return;\r\n        raf = requestAnimationFrame(update);\r\n    };\r\n\r\n    const io = new IntersectionObserver(\r\n        (entries) => {\r\n            const isIn = entries.some((e) => e.isIntersecting);\r\n            if (isIn && !active) {\r\n                active = true;\r\n                update();\r\n                window.addEventListener(\"scroll\", onScroll, { passive: true });\r\n                window.addEventListener(\"resize\", onScroll);\r\n            } else if (!isIn && active) {\r\n                active = false;\r\n                window.removeEventListener(\"scroll\", onScroll);\r\n                window.removeEventListener(\"resize\", onScroll);\r\n            }\r\n        },\r\n        { rootMargin: \"200px 0px 200px 0px\", threshold: 0.01 }\r\n    );\r\n\r\n    io.observe(stage);\r\n}\r\n\r\nfunction initExperienceNumbers() {\r\n    return;\r\n    const section = document.querySelector(\".experience\");\r\n    if (!section) return;\r\n\r\n    const nums = section.querySelector(\".experience__numbers\");\r\n    if (!nums) return;\r\n\r\n    const items = Array.from(nums.querySelectorAll(\".experience__big\"));\r\n    if (!items.length) return;\r\n\r\n    // reduce motion => одразу фінал\r\n    if (window.matchMedia?.(\"(prefers-reduced-motion: reduce)\")?.matches) {\r\n        items.forEach((el) => el.style.setProperty(\"--t\", \"1\"));\r\n        return;\r\n    }\r\n\r\n    let raf = 0;\r\n    let active = false;\r\n\r\n    const clamp01 = (v) => Math.max(0, Math.min(1, v));\r\n\r\n    const update = () => {\r\n        raf = 0;\r\n        if (!active) return;\r\n\r\n        const r = section.getBoundingClientRect();\r\n        const vh = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n        // прогрес секції (довгий, щоб “по одній” було красиво)\r\n        const start = vh * 0.75;\r\n        const end = -vh * 1.10;\r\n        const p01 = clamp01((start - r.top) / (start - end));\r\n\r\n        // розкладаємо на N цифр\r\n        const n = items.length;\r\n        const p = p01 * (n - 1);\r\n\r\n        items.forEach((el, i) => {\r\n            const t = clamp01(p - i);\r\n            el.style.setProperty(\"--t\", t.toFixed(4));\r\n        });\r\n    };\r\n\r\n    const onScroll = () => {\r\n        if (raf) return;\r\n        raf = requestAnimationFrame(update);\r\n    };\r\n\r\n    const io = new IntersectionObserver(\r\n        (entries) => {\r\n            const isIn = entries.some((e) => e.isIntersecting);\r\n            if (isIn && !active) {\r\n                active = true;\r\n                update();\r\n                window.addEventListener(\"scroll\", onScroll, { passive: true });\r\n                window.addEventListener(\"resize\", onScroll);\r\n            } else if (!isIn && active) {\r\n                active = false;\r\n                window.removeEventListener(\"scroll\", onScroll);\r\n                window.removeEventListener(\"resize\", onScroll);\r\n            }\r\n        },\r\n        { rootMargin: \"300px 0px 300px 0px\", threshold: 0.01 }\r\n    );\r\n\r\n    io.observe(section);\r\n}"],"names":[],"mappings":"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"}