{"version":3,"file":"calc-Be5ItQa0.js","sources":["../../js/calc.js"],"sourcesContent":["//Калькулятор\r\n\r\nfunction toNum(v){\r\n    // підтримка коми 4,5\r\n    const n = Number(String(v).trim().replace(\",\", \".\"));\r\n    return Number.isFinite(n) ? n : null;\r\n}\r\n\r\nfunction openModal(id){\r\n    const m = document.getElementById(id);\r\n    m.setAttribute(\"aria-hidden\", \"false\");\r\n}\r\n\r\nfunction closeModal(modal){\r\n    modal.setAttribute(\"aria-hidden\", \"true\");\r\n}\r\n\r\n(function initAzCalculator(){\r\n    const modal = document.getElementById(\"az-calc\");\r\n    if (!modal) return;\r\n\r\n    modal.addEventListener(\"click\", (e) => {\r\n        if (e.target.matches(\"[data-close]\")) closeModal(modal);\r\n    });\r\n\r\n    // Виклик з кнопки на картці товару:\r\n    // <button data-az-open>Калькулятор</button>\r\n    document.addEventListener(\"click\", (e) => {\r\n        const btn = e.target.closest(\"[data-az-open]\");\r\n        if (btn) openModal(\"az-calc\");\r\n    });\r\n\r\n    const form = document.getElementById(\"az-form\");\r\n    const result = document.getElementById(\"az-result\");\r\n    const nEl = document.getElementById(\"az-n\");\r\n    const metaEl = document.getElementById(\"az-meta\");\r\n\r\n    form.addEventListener(\"submit\", (e) => {\r\n        e.preventDefault();\r\n\r\n        const inom = toNum(form.inom.value);\r\n        const rho = toNum(form.rho.value);\r\n\r\n        if (inom === null || rho === null || inom <= 0 || rho <= 0) {\r\n            result.hidden = false;\r\n            nEl.textContent = \"—\";\r\n            metaEl.textContent = \"Перевір числа: мають бути > 0 (можна 4,0 або 4.0).\";\r\n            return;\r\n        }\r\n\r\n        // Константи з твоєї таблиці\r\n        const K_max_I = 1.5;\r\n        const U_skz_max = 50;\r\n        const K_zapas_U = 1.5;\r\n        const K_zapas_R = 1.3;\r\n        const K_season = 1.3;\r\n        const K_ekr = 0.75;\r\n        const V_anod = 0.02;   // кг/(A*рік)\r\n        const T_years = 20;\r\n        const K_nerivn = 2;\r\n        const M_core = 6;      // кг\r\n\r\n        // Розрахунки\r\n        const I_max = inom * K_max_I;\r\n        const U_start = U_skz_max / K_zapas_U;\r\n        const R_calc = U_start / inom;\r\n        const R_start = R_calc / K_zapas_R;\r\n\r\n        const Ri_base = 5 * 0.1 * rho;\r\n        const Ri = Ri_base * K_season;\r\n\r\n        const N_electr = Ri / R_start;\r\n        const N_fact = N_electr / K_ekr;\r\n\r\n        const M_az = V_anod * T_years * inom * K_nerivn;\r\n        const N_by_mass = M_az / M_core;\r\n\r\n        const N_final = Math.ceil(Math.max(N_fact, N_by_mass));\r\n\r\n        result.hidden = false;\r\n        nEl.textContent = String(N_final);\r\n        metaEl.textContent =\r\n            `Imax=${I_max.toFixed(2)}A, Uпоч=${U_start.toFixed(2)}V, Nфакт=${N_fact.toFixed(2)}, Nпо масі=${N_by_mass.toFixed(2)}.`;\r\n    });\r\n})();"],"names":[],"mappings":"AAEA,SAAS,MAAM,GAAE;AAEb,QAAM,IAAI,OAAO,OAAO,CAAC,EAAE,KAAI,EAAG,QAAQ,KAAK,GAAG,CAAC;AACnD,SAAO,OAAO,SAAS,CAAC,IAAI,IAAI;AACpC;AAEA,SAAS,UAAU,IAAG;AAClB,QAAM,IAAI,SAAS,eAAe,EAAE;AACpC,IAAE,aAAa,eAAe,OAAO;AACzC;AAEA,SAAS,WAAW,OAAM;AACtB,QAAM,aAAa,eAAe,MAAM;AAC5C;AAAA,CAEC,SAAS,mBAAkB;AACxB,QAAM,QAAQ,SAAS,eAAe,SAAS;AAC/C,MAAI,CAAC,MAAO;AAEZ,QAAM,iBAAiB,SAAS,CAAC,MAAM;AACnC,QAAI,EAAE,OAAO,QAAQ,cAAc,EAAG,YAAW,KAAK;AAAA,EAC1D,CAAC;AAID,WAAS,iBAAiB,SAAS,CAAC,MAAM;AACtC,UAAM,MAAM,EAAE,OAAO,QAAQ,gBAAgB;AAC7C,QAAI,IAAK,WAAU,SAAS;AAAA,EAChC,CAAC;AAED,QAAM,OAAO,SAAS,eAAe,SAAS;AAC9C,QAAM,SAAS,SAAS,eAAe,WAAW;AAClD,QAAM,MAAM,SAAS,eAAe,MAAM;AAC1C,QAAM,SAAS,SAAS,eAAe,SAAS;AAEhD,OAAK,iBAAiB,UAAU,CAAC,MAAM;AACnC,MAAE,eAAc;AAEhB,UAAM,OAAO,MAAM,KAAK,KAAK,KAAK;AAClC,UAAM,MAAM,MAAM,KAAK,IAAI,KAAK;AAEhC,QAAI,SAAS,QAAQ,QAAQ,QAAQ,QAAQ,KAAK,OAAO,GAAG;AACxD,aAAO,SAAS;AAChB,UAAI,cAAc;AAClB,aAAO,cAAc;AACrB;AAAA,IACJ;AAGA,UAAM,UAAU;AAChB,UAAM,YAAY;AAClB,UAAM,YAAY;AAClB,UAAM,YAAY;AAClB,UAAM,WAAW;AACjB,UAAM,QAAQ;AACd,UAAM,SAAS;AACf,UAAM,UAAU;AAChB,UAAM,WAAW;AACjB,UAAM,SAAS;AAGf,UAAM,QAAQ,OAAO;AACrB,UAAM,UAAU,YAAY;AAC5B,UAAM,SAAS,UAAU;AACzB,UAAM,UAAU,SAAS;AAEzB,UAAM,UAAU,IAAI,MAAM;AAC1B,UAAM,KAAK,UAAU;AAErB,UAAM,WAAW,KAAK;AACtB,UAAM,SAAS,WAAW;AAE1B,UAAM,OAAO,SAAS,UAAU,OAAO;AACvC,UAAM,YAAY,OAAO;AAEzB,UAAM,UAAU,KAAK,KAAK,KAAK,IAAI,QAAQ,SAAS,CAAC;AAErD,WAAO,SAAS;AAChB,QAAI,cAAc,OAAO,OAAO;AAChC,WAAO,cACH,QAAQ,MAAM,QAAQ,CAAC,CAAC,WAAW,QAAQ,QAAQ,CAAC,CAAC,YAAY,OAAO,QAAQ,CAAC,CAAC,cAAc,UAAU,QAAQ,CAAC,CAAC;AAAA,EAC5H,CAAC;AACL,GAAC;"}